%Correctness
\section{Correctness}
\subsection{The Graph Structure}
The graph structure chosen is simple directed graph in which the syntax and semantics are discussed in detail in sections \ref{sec:statechartsyn}, \ref{sec:statechartsem} respectively. To examine correctness we begin by looking at a basic atom and how it will be translated into the final code.

The simplest case is a diagram in which only the start node exists.

[DIAGRAM GOES HERE]
%add picture here.
In this simple example the following generated intermediate code \emphasize{IL} is created.

\begin{lstlisting}
// VARIABLE DECLARATIONS //
BLUID0:
//////////////////////////////////////
//        PROGRAM START             //
//////////////////////////////////////
goto EOF;

EOF:
\end{lstlisting}

In this simplest example we have a label inserted at the beginning of the start block so we can re-enter the start block namely BLUID0. Following the label a comment header to denote the block type, and no variables declared.  Because there is no other transition or block an automatic transition to \emphasize{EOF} is setup in order to terminate the program.

[DIAGRAM GOES HERE]
%draw diagram of metioned
Moving up in complexity we have a start block followed by our next simpliest element the delay block, joined by one transition leaving the start block. We can see from figure %need figure ref here
the structure of this new graph. We will use this example to examine transitions are compiled into final code, but first we shall look at the delay block itself.

The delay block itself has a structure identical to the start block. The only difference in this case is the delay block doesn't have a null code section. The delay block generates one line of code, namely delay(integer). The actual delay routine is implimented on the driver level per device since certain devices lack internal timers. It will be up to each implementor to ensure that the delay will correctly delay each the integer specified (in milliseconds). 

In this basic example transitions are actually used at this point. The reader will observe that we have directly mapped each edge to a goto statement that is guarded by the guard condition on the edge itself. As defined in section \ref{sec:statechartsyn} the transitions are always mutually exclusive and to not do so would be considered a syntax error. The reason is there is no way to enforce sequence in which each edge is evaluated that would make sense to the programmer constructing the diagram in a visual way. It is up to the programmer (diagram constructor) to ensure that we never run into a condition where two edges actually have an area of overlap.

Each block has an unique identitifer associated with it, this identifier is what is used by the goto blocks in order to recreate the graph structure in the code. The unique identifier is generated at design time and is checked at compile time to ensure that it is in fact unique.


%the lower sections might be superceeded by the above.
\subsection{The IL}
\subsection{The Generated Code Sections}
\subsection{The Simulator}